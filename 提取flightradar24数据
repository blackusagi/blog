# 通过访问每个机场的url，得到javascript信息，解析出需要的信息出来

import requests
from selenium import webdriver
from selenium.webdriver.common.by import By
browser=webdriver.Chrome()
browser.get("https://www.flightradar24.com/data/airports/china")
flight_url = browser.find_elements_by_css_selector('#tbl-datatable > tbody > tr> td> a')


# lis_name存中国所有机场代码
lis_name = []
for i in flight_url:
    l_name = i.get_attribute('data-iata')
    lis_name.append(l_name)

while None in lis_name:
    lis_name.remove(None)

#得到所有url链接
for i in lis_name:
    url = 'https://www.flightradar24.com/data/airports/{}/routes'
    new_url = url.format(i)
    headers = {'User-Agent':'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.81 Safari/537.36'}
    response = requests.get(url=new_url, headers=headers,verify=False)
